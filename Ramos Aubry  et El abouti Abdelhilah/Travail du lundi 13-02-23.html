<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>D√©mineur</title>
  <style>
    /* Votre code CSS ici */
      table {
    border-collapse: collapse;
    margin: 0 auto;
  }
  td {
    width: 30px;
    height: 30px;
    text-align: center;
    font-weight: bold;
    border: 1px solid black;
    background-color: #ddd;
  }
  .revealed {
    background-color: white;
  }
  .flagged {
    background-color: yellow;
  }¬≤¬≤¬≤
  </style>
</head>
<body>
  <!-- Votre code HTML et JavaScript ici -->
  <table id="game-board"></table>
  <script>
    // D√©finit les constantes de jeu pour le d√©mineur
    const ROWS = 10; // nombre de lignes du d√©mineur
    const COLS = 10; // nombre de colonnes du d√©mineur
    const MINES = 15; // nombre de mines

    // Initialise le tableau de jeu avec des z√©ros
    let board = []; // tableau de jeu
    for (let i = 0; i < ROWS; i++) {
      board[i] = [];
      for (let j = 0; j < COLS; j++) {
        board[i][j] = 0;
      }
    }

    // Place les mines dans le tableau de jeu
    let minesPlaced = 0;
    while (minesPlaced < MINES) {
      let row = Math.floor(Math.random() * ROWS);
      let col = Math.floor(Math.random() * COLS);
      if (board[row][col] === 0) {
        board[row][col] = 'M';
        minesPlaced++;
      }
    }

    // Calcule les valeurs de chaque case
    for (let i = 0; i < ROWS; i++) {
      for (let j = 0; j < COLS; j++) {
        if (board[i][j] !== 'M') {
          let count = 0;
          if (i > 0 && j > 0 && board[i - 1][j - 1] === 'M') count++;
          if (i > 0 && board[i - 1][j] === 'M') count++;
          if (i > 0 && j < COLS - 1 && board[i - 1][j + 1] === 'M') count++;
          if (j > 0 && board[i][j - 1] === 'M') count++;
          if (j < COLS - 1 && board[i][j + 1] === 'M') count++;
          if (i < ROWS - 1 && j > 0 && board[i + 1][j - 1] === 'M') count++;
          if (i < ROWS - 1 && board[i + 1][j] === 'M') count++;
          if (i < ROWS - 1 && j < COLS - 1 && board[i + 1][j + 1] === 'M') count++;
          board[i][j] = count;
        }
      }
    }

    // Fonction pour g√©rer le clic sur une case
    function handleClick(event) {
      let row = parseInt(event.target.getAttribute('data-row'));
      let col = parseInt(event.target.getAttribute('data-col'));
      let cell = event.target;

      // Ignore le clic si la case a d√©j√† √©t√© r√©v√©l√©e ou marqu√©e
      if (cell.classList.contains('revealed') || cell.classList.contains('flagged')) {
        return;
      }

      
        // R√©v√®le la case cliqu√©e
      cell.classList.add('revealed');
      if (board[row][col] === 'M') {
        // La case est une mine, fin du jeu
        cell.textContent = 'üí£';
        alert('Vous avez perdu !');
      } else if (board[row][col] === 0) {
        // La case est vide, r√©v√®le les cases adjacentes
        revealAdjacentCells(row, col);
      } else {
        // La case contient un nombre, affiche le nombre
        cell.textContent = board[row][col];
      }
    }

    // Fonction pour r√©v√©ler les cases adjacentes √† une case vide
    function revealAdjacentCells(row, col) {
      if (row < 0 || row >= ROWS || col < 0 || col >= COLS) {
        // La case est en dehors des limites du tableau, fin de la r√©cursion
        return;
      }
      let cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
      if (cell.classList.contains('revealed') || cell.classList.contains('flagged')) {
        // La case a d√©j√† √©t√© r√©v√©l√©e ou marqu√©e, fin de la r√©cursion
        return;
      }
      cell.classList.add('revealed');
      if (board[row][col] === 0) {
        // La case est vide, continue de r√©v√©ler les cases adjacentes
        revealAdjacentCells(row - 1, col - 1);
        revealAdjacentCells(row - 1, col);
        revealAdjacentCells(row - 1, col + 1);
        revealAdjacentCells(row, col - 1);
        revealAdjacentCells(row, col + 1);
        revealAdjacentCells(row + 1, col - 1);
        revealAdjacentCells(row + 1, col);
        revealAdjacentCells(row + 1, col + 1);
      } else {
        // La case contient un nombre, affiche le nombre
        cell.textContent = board[row][col];
      }
    }

    // Dessine le tableau de jeu dans la page HTML
    let table = document.getElementById('game-board');
    for (let i = 0; i < ROWS; i++) {
      let row = document.createElement('tr');
      for (let j = 0; j < COLS; j++) {
        let cell = document.createElement('td');
        cell.setAttribute('data-row', i);
        cell.setAttribute('data-col', j);
        cell.addEventListener('click', handleClick);
        row.appendChild(cell);
      }
      table.appendChild(row);
    }
  </script>
</body>
</html>
